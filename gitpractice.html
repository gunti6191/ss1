<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap.CSS CDN --> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
        <!-- Font Awesome CDN --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Animate.CSS CDN --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
        <!-- JQuery CDN --> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
         <!-- FontFamily CDN (Only one BreeSerif) --> <link href='https://fonts.googleapis.com/css?family=Bree Serif' rel='stylesheet'>
        <title>LOCAL STORAGE</title>
        <style>
            body {background-color: blanchedalmond;}
            .table-hover{background-color: beige;}
            thead{background-color: khaki;}
            h4{font-family: 'Bree Serif'; font-weight: bold;}
            span{font-family: 'Trebuchet MS', sans-serif; font-size:20px; font-weight:bold}
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row mt-5">
                <div class="col-8 offset-md-2">
                    <div>
                        <button type="button" class="btn btn-outline-primary mb-3 float-end" data-bs-toggle="modal" data-bs-target="#Modal"><i class="fa-solid fa-user-plus"></i></button>
                    </div>
                    <div>
                        <table class="table table-hover table-bordered rounded shadow-lg p-2">
                            <thead>
                              <tr>
                                <th scope="col"><h4>#</h4></th>
                                <th scope="col"><h4>First Name</h4></th>
                                <th scope="col"><h4>Last Name</h4></th>
                                <th scope="col"><h4>Email ID</h4></th>
                                <th scope="col"><h4>Address</h4></th>
                                <th scope="col" class="text-center"><h4>Action</h4></th>
                              </tr>
                            </thead>
                            <tbody id="tbody" class="table-group-divider"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Add Modal Start-->
        <div class="modal fade" id="Modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Add Details</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form class="cmxform" id="commentForm" method="get" action="">
                            <div class="mb-3">
                                <label for="addId" class="form-label">ID</label>
                                <input type="number" class="form-control" id="addId" name="addId" required/>
                            </div>
                            <div class="mb-3">
                                <label for="addFirstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="addFirstName" name="addFirstName" required/>
                            </div>
                            <div class="mb-3">
                                <label for="addLastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="addLastName" name="addLastName" required/>
                            </div>
                            <div class="mb-3">
                                <label for="addEmail" class="form-label">Email ID</label>
                                <input type="text" class="form-control" id="addEmail" name="addEmail" required/>
                            </div>
                            <div class="mb-3">
                                <label for="addAddress" class="form-label">Address</label>
                                <input type="text" class="form-control" id="addAddress" name="addAddress" required/>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success" id="addModal">Add</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Add Modal End -->
        
        <!--Edit Modal Start-->
        <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Details</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form class="cmxform" id="commentForm" method="get" action="">
                            <div class="mb-3">
                                <label for="editId" class="form-label">ID</label>
                                <input type="number" class="form-control" id="editId" name="editId" required/>
                            </div>
                            <div class="mb-3">
                                <label for="editFirstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="editFirstName" name="editFirstName" required/>
                            </div>
                            <div class="mb-3">
                                <label for="editLastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="editLastName" name="editLastName" required/>
                            </div>
                            <div class="mb-3">
                                <label for="editEmail" class="form-label">Email ID</label>
                                <input type="text" class="form-control" id="editEmail" name="editEmail" required/>
                            </div>
                            <div class="mb-3">
                                <label for="editAddress" class="form-label">Address</label>
                                <input type="text" class="form-control" id="editAddress" name="editAddress" required/>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success" id="UpdateModal" onclick="updateData();">Update</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Edit Modal End -->
    </body>
    <script>
        $(document).ready(function(){
            loadStorageData()
            $('#addModal').click(function(){
                addItem()
            })
        })
        function loadStorageData()
        {
            $("#tbody").html('');
            keys=Object.keys(localStorage);
            keys=keys.sort();
            for(i=0;i<keys.length;i++)
            {
                key=keys[i];
                array=JSON.parse(localStorage.getItem(key));
                htmlData=(`<tr id="deleteRow">
                                 <th scope="row" id='id_`+key+`'><span>`+key+`</span></th>
                                 <td id='FirstName_`+key+`'><span>`+array[0]+`</span></td>
                                 <td id='LastName_`+key+`'><span>`+array[1]+`</span></td>
                                 <td id='Email_`+key+`'><span>`+array[2]+`</span></td>
                                 <td id='Address_`+key+`'><span>`+array[3]+`</span></td>
                                 <td class="text-center">
                                    <a href='javascript:void(0);' onclick="editData(`+key+`);" class="btn btn-outline-success m-1"><i class="fa-solid fa-pen"></i></a>
                                    <a href='javascript:void(0);' onclick="deleteData(`+key+`);" class="btn btn-outline-danger"><i class="fa-solid fa-trash-can"></i></a>
                                </td>
                               </tr>`)
                $("#tbody").append(htmlData);
            }
        }
        function updateData()
        {
            id=$("#editId").val();
            FirstName=$("#editFirstName").val();
            LastName=$("#editLastName").val();
            Email=$("#editEmail").val();
            Address=$("#editAddress").val();
            edited_details=[FirstName,LastName,Email,Address];
            localStorage.setItem(id,JSON.stringify(edited_details));
            $('#editModal').modal('hide');
            $('#editId').val('');
            $('#editFirstName').val('');
            $('#editLastName').val('');
            $('#editEmail').val('');
            $('#editAddress').val('');
            Swal.fire(
            'Good job!',
            'Information Updated!',
            'success'
            )
            loadStorageData()
        }
        function editData(param)
        {
            id=$("#id_"+param).text();
            FirstName=$("#FirstName_"+param).text();
            LastName=$("#LastName_"+param).text();
            Email=$("#Email_"+param).text();
            Address=$("#Address_"+param).text();
            $("#editId").val(id);
            $("#editFirstName").val(FirstName);
            $("#editLastName").val(LastName);
            $("#editEmail").val(Email);
            $("#editAddress").val(Address);
            $("#editModal").modal('show');
        }
        function deleteData(param)
        {
            const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',Button: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
            })

            swalWithBootstrapButtons.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'No, cancel!',
            reverseButtons: true
            }).then((result) => {
            if (result.isConfirmed) {
                swalWithBootstrapButtons.fire(
                'Deleted!',
                'Your Record has been deleted.',
                'success'
                )
                localStorage.removeItem(param);
                loadStorageData()
            } else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                swalWithBootstrapButtons.fire(
                'Cancelled',
                'Your Record is safe :)',
                'error'
                )
            }
            })
        }
        function addItem()
        {
            id=$('#addId').val();
            FirstName=$('#addFirstName').val();
            LastName=$('#addLastName').val();
            Email=$('#addEmail').val();
            Address=$('#addAddress').val();
            added_details=[FirstName,LastName,Email,Address];
            localStorage.setItem(id,JSON.stringify(added_details));
            $('#Modal').modal('hide');
            $('#addId').val('');
            $('#addFirstName').val('');
            $('#addLastName').val('');
            $('#addEmail').val('');
            $('#addAddress').val('');
            Swal.fire(
            'Good job!',
            'Information Added!',
            'success'
            )
            loadStorageData()
        }
    </script>
    <!-- JQuery Validation CDN --> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <!-- Jquery Sweet alert CDN --> <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Bootstrap Bundle.JS CDN --> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
    <!-- Popper.JS CDN --> <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <!-- Bootstrap.JS CDN <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script> -->
</html>